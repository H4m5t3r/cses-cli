openapi: 3.0.3

info:
  title: CSES API
  description: API describing the communication between CSES CLI and cses.fi
  version: 0.0.1

# define possible authentication methods
components:
  securitySchemes:
    apiKeyAuth: # could be any name
      type: apiKey
      in: header
      name: X-Auth-Token

security:
  - apiKeyAuth: []

paths:
  /login:
    post:
      # unique id for mocking
      operationId: app.login_get

      summary: Logs in the user with CSES credentials

      security: []

      requestBody:
        required: true
        content:
          application/json:
            schema:

              required:
                - username
                - password
              additionalProperties: false

              type: object
              properties:
                username:
                  type: string
                password:
                  type: string

      responses:
        "200":
          description: >
            Authentication successful. X-Auth-Token is returned as a
            json object.
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                required:
                  - X-Auth-Token
                properties:
                  X-Auth-Token:
                    type: string

              examples:
                # for documentations and
                # could be used by the prism
                example1:
                  summary: An example session ID
                  value:
                    X-Auth-Token: "123"

        "401":
          description: Invalid username/password.
